# 大喜利お題生成アプリ 設計ドキュメント

## 🎯 アプリ概要
OpenAI GPT、Claude、Geminiの3つのAIを活用して、多様で創造的な大喜利のお題を大量生成するWebアプリケーション

## 🏗️ 技術スタック
- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **AI APIs**: 
  - OpenAI API (GPT-4)
  - Anthropic Claude API
  - Google Gemini API

## 📱 主要機能

### 1. お題生成機能
- **一括生成**: 3つのAIから同時にお題を生成
- **個別生成**: 特定のAIを選択してお題生成
- **カテゴリ指定**: ジャンル別のお題生成（日常、時事、シチュエーション等）
- **難易度設定**: 初心者〜上級者向けの難易度調整

### 2. UI/UX機能
- **リアルタイム生成**: ストリーミング表示でお題を順次表示
- **お気に入り機能**: 気に入ったお題を保存
- **コピー機能**: お題を簡単にクリップボードにコピー
- **再生成機能**: 気に入らないお題の個別再生成

## 🔧 システム構成

### フロントエンド構造
```
src/
├── app/
│   ├── page.tsx           # メインページ
│   ├── layout.tsx         # レイアウト
│   └── api/
│       ├── openai/route.ts    # OpenAI API エンドポイント
│       ├── claude/route.ts    # Claude API エンドポイント
│       └── gemini/route.ts    # Gemini API エンドポイント
├── components/
│   ├── OdaiGenerator.tsx      # メイン生成コンポーネント
│   ├── OdaiCard.tsx          # お題表示カード
│   ├── AISelector.tsx        # AI選択コンポーネント
│   └── CategorySelector.tsx   # カテゴリ選択
├── lib/
│   ├── openai.ts         # OpenAI クライアント
│   ├── claude.ts         # Claude クライアント
│   ├── gemini.ts         # Gemini クライアント
│   └── prompts.ts        # プロンプト定義
└── types/
    └── index.ts          # 型定義
```

## 🎨 UI設計

### メインページレイアウト
1. **ヘッダー**: アプリタイトルと設定
2. **コントロールパネル**: 
   - AI選択（全て/個別）
   - カテゴリ選択
   - 難易度設定
   - 生成数指定
3. **生成ボタン**: 大きな生成開始ボタン
4. **結果表示エリア**: 
   - AI別にタブ分け
   - カード形式でお題表示
   - お気に入り・コピー・再生成ボタン

### レスポンシブ対応
- モバイル: 縦積みレイアウト
- タブレット: 2カラムレイアウト  
- デスクトップ: 3カラムレイアウト

## 🚀 プロンプト戦略

### 各AIの特性を活かした役割分担
- **OpenAI GPT**: 論理的で構造化されたお題
- **Claude**: 創造的でユーモア溢れるお題
- **Gemini**: トレンドや時事を反映したお題

### プロンプト例
```typescript
const PROMPTS = {
  base: "大喜利のお題を{count}個生成してください。",
  categories: {
    daily: "日常生活に関する面白い大喜利のお題",
    situation: "シチュエーション系の大喜利のお題", 
    wordplay: "言葉遊びを使った大喜利のお題"
  }
}
```

## 🔧 実装フェーズ

### Phase 1: 基盤構築
1. 環境変数設定 - .env.localファイル作成、API キー設定
2. 型定義 - TypeScript型定義ファイル作成
3. AI クライアント - OpenAI、Claude、Gemini のAPIクライアント実装

### Phase 2: API層実装  
4. API Routes - 各AIサービス向けのAPI エンドポイント作成
5. プロンプト設計 - 効果的なお題生成プロンプトの作成
6. エラーハンドリング - API呼び出しの例外処理

### Phase 3: UI実装
7. メインページ - お題生成インターフェース構築
8. コンポーネント作成 - お題表示、AI選択、カテゴリ選択コンポーネント
9. スタイリング - Tailwind CSSでレスポンシブデザイン実装

### Phase 4: 機能統合・最適化
10. 機能統合 - フロントエンドとAPI の接続
11. UX改善 - ローディング状態、エラー表示の実装
12. テスト・デバッグ - 動作確認と不具合修正

## 📋 見積もり
- **開発期間**: 約2-3日
- **ファイル数**: 約30-40ファイル
- **プロジェクト規模**: 中規模